<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Assistant</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <form id="updateForm" action="/update_assistant" method="post">
            <h2>Update Assistant</h2>
            <div class="input-box">
                <label for="assistantId" style="font-weight: bold; color: rgb(0, 0, 0);">Assistant ID:</label>
                <input type="text" id="assistantId" name="assistant_id" required>
            </div>
            <div class="input-box">
                <label for="assistantInstructions" style="font-weight: bold; color: rgb(0, 0, 0);">New Instructions:</label>
                <input type="text" id="assistantInstructions" name="assistant_instructions" required>
            </div>
            <div class="input-box">
                <label for="toolType" style="font-weight: bold; color: rgb(0, 0, 0);">New Tool:</label>
                <div class="dropdown">
                    <input type="checkbox" id="toolDropdown">
                    <label class="dropdown__face" for="toolDropdown">
                        <div class="dropdown__text" id="toolDropdownText">Select tool</div>
                        <div class="dropdown__arrow"></div>
                    </label>
                    <ul class="dropdown__items">
                        <li onclick="selectToolType('file_search')" style="font-weight: bold; color: rgb(0, 0, 0);">Retrieval</li>
                        <li onclick="selectToolType('code_interpreter')" style="font-weight: bold; color: rgb(0, 0, 0);">Code Interpreter</li>
                    </ul>
                </div>
            </div>
            <div class="input-box">
                <label for="ModelType" style="font-weight: bold; color: rgb(0, 0, 0);">New Model:</label>
                <div class="dropdown">
                    <input type="checkbox" id="ModelDropdown">
                    <label class="dropdown__face" for="ModelDropdown">
                        <div class="dropdown__text" id="ModelDropdownText">Select Model</div>
                        <div class="dropdown__arrow"></div>
                    </label>
                    <ul class="dropdown__items">
                        <li onclick="selectModelType('gpt-3.5-turbo')" style="font-weight: bold; color: rgb(0, 0, 0);">ChatGPT-3.5-Turbo</li>
                        <li onclick="selectModelType('gpt-4o')" style="font-weight: bold; color: rgb(0, 0, 0);">ChatGPT-4o</li>
                    </ul>
                </div>
            </div>
            <input type="hidden" id="toolType" name="tool_type" required>
            <input type="hidden" id="ModelType" name="Model_type" required>
            <div id="errorMessage" style="color: red;"></div>
            <button type="submit" class="button-3">Update Assistant</button>
        </form>
        <form action="/create_chatbot" method="post">
            <input type="hidden" id="assistantIdCreate" name="assistant_id">
            <button type="submit" class="button-3">Create Chatbot</button>
        </form>
    </div>

    <script>
        // Function to handle tool type selection
        function selectToolType(type) {
            document.getElementById('toolType').value = type;
            document.getElementById('toolDropdownText').innerText = type;
            document.getElementById('toolDropdown').checked = false;
        }
        function selectModelType(type) {
            document.getElementById('ModelType').value = type;
            document.getElementById('ModelDropdownText').innerText = type;
            document.getElementById('ModelDropdown').checked = false;
        }

        // Form validation to ensure a tool is selected
        document.getElementById("updateForm").addEventListener("submit", function(event) {
            const toolType = document.getElementById("toolType").value;
            const ModelType = document.getElementById("ModelType").value;

            if (!toolType) {
                event.preventDefault();
                document.getElementById("errorMessage").textContent = "Please select a tool.";
            }
            if (!ModelType) {
                event.preventDefault();
                document.getElementById("errorMessage").textContent = "Please select a Model.";
            }
        });

        // Copy assistant ID to the Create Chatbot form
        document.getElementById("assistantId").addEventListener("input", function() {
            document.getElementById("assistantIdCreate").value = this.value;
        });
    </script>
</body>
</html>
